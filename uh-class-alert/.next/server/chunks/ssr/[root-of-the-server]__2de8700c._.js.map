{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/app/dashboard/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Subscription {\n    id: string;\n    subject: string;\n    catalogNbr: string;\n    title: string | null;\n    isOpen: boolean;\n    seatsAvailable: number;\n    lastChecked: string | null;\n}\n\nexport default function Dashboard() {\n    const router = useRouter();\n    const [subscriptions, setSubscriptions] = useState<Subscription[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [addingClass, setAddingClass] = useState(false);\n    const [subject, setSubject] = useState('');\n    const [catalogNbr, setCatalogNbr] = useState('');\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n\n    const fetchSubscriptions = async () => {\n        try {\n            const res = await fetch('/api/subscriptions');\n            if (res.status === 401) {\n                router.push('/');\n                return;\n            }\n            const data = await res.json();\n            setSubscriptions(data.subscriptions || []);\n        } catch (err) {\n            console.error('Failed to fetch subscriptions:', err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchSubscriptions();\n    }, []);\n\n    const handleAddClass = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError('');\n        setSuccess('');\n        setAddingClass(true);\n\n        try {\n            // First, verify the class exists\n            const searchRes = await fetch(\n                `/api/classes/search?subject=${subject.toUpperCase()}&catalogNbr=${catalogNbr}`\n            );\n            const searchData = await searchRes.json();\n\n            if (!searchData.found) {\n                setError('Class not found. Please check the subject and catalog number.');\n                setAddingClass(false);\n                return;\n            }\n\n            // Add subscription\n            const res = await fetch('/api/subscriptions', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    subject: subject.toUpperCase(),\n                    catalogNbr,\n                    title: searchData.class.title,\n                }),\n            });\n\n            const data = await res.json();\n\n            if (res.ok) {\n                setSuccess(`Added ${subject.toUpperCase()} ${catalogNbr} to your watchlist!`);\n                setSubject('');\n                setCatalogNbr('');\n                fetchSubscriptions();\n            } else {\n                setError(data.error || 'Failed to add class');\n            }\n        } catch {\n            setError('Failed to add class');\n        } finally {\n            setAddingClass(false);\n        }\n    };\n\n    const handleRemoveClass = async (id: string) => {\n        try {\n            const res = await fetch(`/api/subscriptions/${id}`, { method: 'DELETE' });\n            if (res.ok) {\n                setSubscriptions(prev => prev.filter(s => s.id !== id));\n            }\n        } catch (err) {\n            console.error('Failed to remove class:', err);\n        }\n    };\n\n    const handleLogout = async () => {\n        await fetch('/api/auth/logout', { method: 'POST' });\n        router.push('/');\n    };\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center\">\n                <div className=\"text-[var(--foreground-muted)]\">Loading...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen\">\n            {/* Header */}\n            <header className=\"border-b border-[var(--border)] p-4\">\n                <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\n                    <div className=\"flex items-center gap-2\">\n                        <span className=\"text-2xl\">ðŸ””</span>\n                        <span className=\"font-bold text-xl\">UH Class Alert</span>\n                    </div>\n                    <button onClick={handleLogout} className=\"btn-secondary text-sm\">\n                        Logout\n                    </button>\n                </div>\n            </header>\n\n            <main className=\"max-w-4xl mx-auto p-6\">\n                <h1 className=\"text-3xl font-bold mb-8\">Your Watchlist</h1>\n\n                {/* Add Class Form */}\n                <div className=\"card mb-8\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Add a Class</h2>\n                    <form onSubmit={handleAddClass} className=\"flex flex-col sm:flex-row gap-3\">\n                        <input\n                            type=\"text\"\n                            value={subject}\n                            onChange={(e) => setSubject(e.target.value)}\n                            placeholder=\"Subject (e.g., COSC)\"\n                            className=\"input sm:w-32\"\n                            maxLength={4}\n                            required\n                        />\n                        <input\n                            type=\"text\"\n                            value={catalogNbr}\n                            onChange={(e) => setCatalogNbr(e.target.value)}\n                            placeholder=\"Class # (e.g., 4337)\"\n                            className=\"input sm:w-40\"\n                            maxLength={5}\n                            required\n                        />\n                        <button\n                            type=\"submit\"\n                            className=\"btn-primary\"\n                            disabled={addingClass}\n                        >\n                            {addingClass ? 'Adding...' : 'Add Class'}\n                        </button>\n                    </form>\n                    {error && <p className=\"mt-3 text-red-400 text-sm\">{error}</p>}\n                    {success && <p className=\"mt-3 text-green-400 text-sm\">{success}</p>}\n                </div>\n\n                {/* Subscriptions List */}\n                {subscriptions.length === 0 ? (\n                    <div className=\"card text-center py-12\">\n                        <div className=\"text-4xl mb-4\">ðŸ“š</div>\n                        <p className=\"text-[var(--foreground-muted)]\">\n                            No classes on your watchlist yet. Add one above!\n                        </p>\n                    </div>\n                ) : (\n                    <div className=\"space-y-4\">\n                        {subscriptions.map((sub) => (\n                            <div key={sub.id} className=\"card flex items-center justify-between animate-fade-in\">\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <span className={`text-2xl ${sub.isOpen ? 'animate-pulse' : ''}`}>\n                                            {sub.isOpen ? 'ðŸŸ¢' : 'ðŸ”´'}\n                                        </span>\n                                        <div>\n                                            <h3 className=\"font-semibold text-lg\">\n                                                {sub.subject} {sub.catalogNbr}\n                                            </h3>\n                                            {sub.title && (\n                                                <p className=\"text-[var(--foreground-muted)] text-sm\">{sub.title}</p>\n                                            )}\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-2 text-sm text-[var(--foreground-muted)]\">\n                                        {sub.isOpen ? (\n                                            <span className=\"status-open font-medium\">\n                                                {sub.seatsAvailable} seat{sub.seatsAvailable !== 1 ? 's' : ''} available!\n                                            </span>\n                                        ) : (\n                                            <span>Currently closed</span>\n                                        )}\n                                        {sub.lastChecked && (\n                                            <span className=\"ml-3\">\n                                                â€¢ Last checked: {new Date(sub.lastChecked).toLocaleString()}\n                                            </span>\n                                        )}\n                                    </div>\n                                </div>\n                                <button\n                                    onClick={() => handleRemoveClass(sub.id)}\n                                    className=\"text-[var(--foreground-muted)] hover:text-red-400 transition-colors p-2\"\n                                    title=\"Remove from watchlist\"\n                                >\n                                    âœ•\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {/* Info */}\n                <div className=\"mt-8 p-4 rounded-lg bg-[var(--background-tertiary)] text-sm text-[var(--foreground-muted)]\">\n                    <p>\n                        ðŸ”” We check for class openings every 2 hours. When a seat opens up,\n                        you&apos;ll receive an email notification immediately.\n                    </p>\n                </div>\n            </main>\n        </div>\n    );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}