module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},49846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)({}),[w,x]=(0,c.useState)(!1),y=async()=>{try{let b=await fetch("/api/subscriptions");if(401===b.status)return void a.push("/");let c=await b.json();f(c.subscriptions||[])}catch(a){console.error("Failed to fetch subscriptions:",a)}finally{h(!1)}};(0,c.useEffect)(()=>{y()},[]);let z=async a=>{a.preventDefault(),p(""),r(""),j(!0);try{let a=await fetch(`/api/classes/search?subject=${k.toUpperCase()}&catalogNbr=${m}`),b=await a.json();if(!b.found){p("Class not found. Please check the subject and catalog number."),j(!1);return}let c=await fetch("/api/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:k.toUpperCase(),catalogNbr:m,title:b.class.title})}),d=await c.json();c.ok?(r(`Added ${k.toUpperCase()} ${m} to your watchlist!`),l(""),n(""),y()):p(d.error||"Failed to add class")}catch{p("Failed to add class")}finally{j(!1)}},A=async a=>{try{(await fetch(`/api/subscriptions/${a}`,{method:"DELETE"})).ok&&f(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Failed to remove class:",a)}},B=async()=>{await fetch("/api/auth/logout",{method:"POST"}),a.push("/")},C=async a=>{let b=`${a.subject}-${a.catalogNbr}`;if(s===b)return void t(null);if(t(b),!u[b]){x(!0);try{let c=await fetch(`/api/classes/cached-sections?subject=${a.subject}&catalogNbr=${a.catalogNbr}`),d=await c.json();d.sections&&0!==d.sections.length||(c=await fetch(`/api/classes/sections?subject=${a.subject}&catalogNbr=${a.catalogNbr}`),d=await c.json()),v(a=>({...a,[b]:d.sections||[]}))}catch(a){console.error("Failed to fetch sections:",a)}finally{x(!1)}}};return g?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-[var(--foreground-muted)]",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen hero-gradient",children:[(0,b.jsx)("header",{className:"sticky top-0 z-50",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:"/University_of_Houston_Logo.svg.png",alt:"UH",className:"w-8 h-8"}),(0,b.jsx)("span",{className:"font-semibold text-lg tracking-tight",children:"Alert"})]}),(0,b.jsxs)("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm text-[var(--foreground-muted)] hover:text-[var(--foreground)] hover:bg-[var(--glass)] border border-transparent hover:border-[var(--glass-border)] transition-all duration-200",children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,b.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,b.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sign out"]})]})}),(0,b.jsxs)("main",{className:"max-w-5xl mx-auto px-6 py-10",children:[(0,b.jsxs)("div",{className:"mb-10",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold tracking-tight mb-2",children:"Your Watchlist"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"Add classes to track and get notified when seats open up."})]}),(0,b.jsxs)("div",{className:"card mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Add a Class"}),(0,b.jsx)("form",{onSubmit:z,className:"flex flex-col gap-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm text-[var(--foreground-muted)] mb-2",children:"Subject Code"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value.toUpperCase()),placeholder:"e.g. COSC",className:"input w-full",maxLength:4,required:!0})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm text-[var(--foreground-muted)] mb-2",children:"Course Number"}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),placeholder:"e.g. 3320",className:"input w-full",maxLength:5,required:!0})]}),(0,b.jsx)("div",{className:"sm:self-end",children:(0,b.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto",disabled:i,children:i?"Adding...":"Add to Watchlist"})})]})}),o&&(0,b.jsx)("p",{className:"mt-3 text-red-400 text-sm",children:o}),q&&(0,b.jsx)("p",{className:"mt-3 text-green-400 text-sm",children:q})]}),0===e.length?(0,b.jsx)("div",{className:"card text-center py-12",children:(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"No classes on your watchlist yet. Add one above!"})}):(0,b.jsx)("div",{className:"space-y-4",children:e.map((a,c)=>{let d=`${a.subject}-${a.catalogNbr}`,e=s===d;return(0,b.jsxs)("div",{className:"card animate-fade-in overflow-hidden",style:{animationDelay:`${.1*c}s`},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between cursor-pointer group",onClick:()=>C(a),children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${a.isOpen?"bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]":"bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg tracking-tight",children:[a.subject," ",a.catalogNbr]}),a.title&&(0,b.jsx)("p",{className:"text-[var(--foreground-muted)] text-sm",children:a.title})]})]}),(0,b.jsxs)("div",{className:"mt-3 ml-7 text-sm flex items-center gap-3",children:[a.isOpen?(0,b.jsxs)("span",{className:"text-green-400 font-medium",children:[a.seatsAvailable," seat",1!==a.seatsAvailable?"s":""," available"]}):(0,b.jsx)("span",{className:"text-[var(--foreground-muted)]",children:"Currently closed"}),(0,b.jsx)("span",{className:"text-[var(--foreground-muted)] opacity-60",children:"Click to view all sections"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`text-[var(--foreground-muted)] transition-transform duration-200 ${e?"rotate-180":""}`,children:(0,b.jsx)("polyline",{points:"6 9 12 15 18 9"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),A(a.id)},className:"opacity-0 group-hover:opacity-100 text-[var(--foreground-muted)] hover:text-red-400 hover:bg-red-500/10 transition-all duration-200 p-2 rounded-lg",title:"Remove from watchlist",children:(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M3 6h18"}),(0,b.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,b.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]})]}),e&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-[var(--glass-border)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-xs text-[var(--foreground-muted)]",children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),"Cached data - updated every 15 minutes"]}),w?(0,b.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-[var(--uh-red)] border-t-transparent rounded-full animate-spin"})}):0===(u[d]||[]).filter(a=>a.isOpen).length?(0,b.jsx)("p",{className:"text-[var(--foreground-muted)] text-sm text-center py-4",children:"No open sections in cache. Add the class to trigger a live fetch."}):(0,b.jsx)("div",{className:"space-y-3",children:(u[d]||[]).filter(a=>a.isOpen).map((a,c)=>(0,b.jsx)("div",{className:"flex items-start justify-between p-3 rounded-lg bg-[var(--background)]/50 hover:bg-[var(--background)]/80 transition-colors",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,b.jsx)("span",{className:"font-medium",children:a.instructor||"TBA"}),(0,b.jsxs)("span",{className:"text-green-400 text-sm",children:[a.seatsAvailable," open"]})]}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--foreground-muted)] ml-4",children:[(0,b.jsxs)("p",{children:["Section ",a.section," • ",a.schedule||"TBA"]}),(0,b.jsxs)("p",{children:[a.location||"TBA"," • ",a.enrollmentTotal,"/",a.enrollmentCap," enrolled"]})]})]})},a.classNbr||c))}),a.lastChecked&&(0,b.jsxs)("p",{className:"mt-3 text-xs text-[var(--foreground-muted)] opacity-60",children:["Last checked: ",new Date(a.lastChecked).toLocaleString()]})]})]},a.id)})}),(0,b.jsx)("div",{className:"mt-8 p-4 rounded-lg bg-[var(--background-tertiary)] text-sm text-[var(--foreground-muted)]",children:(0,b.jsx)("p",{children:"We check for class openings every 15 minutes. When a seat opens up, you'll receive an email notification immediately."})})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0cef1465._.js.map