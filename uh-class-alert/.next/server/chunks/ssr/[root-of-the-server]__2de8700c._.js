module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},49846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),s=async()=>{try{let b=await fetch("/api/subscriptions");if(401===b.status)return void a.push("/");let c=await b.json();f(c.subscriptions||[])}catch(a){console.error("Failed to fetch subscriptions:",a)}finally{h(!1)}};(0,c.useEffect)(()=>{s()},[]);let t=async a=>{a.preventDefault(),p(""),r(""),j(!0);try{let a=await fetch(`/api/classes/search?subject=${k.toUpperCase()}&catalogNbr=${m}`),b=await a.json();if(!b.found){p("Class not found. Please check the subject and catalog number."),j(!1);return}let c=await fetch("/api/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:k.toUpperCase(),catalogNbr:m,title:b.class.title})}),d=await c.json();c.ok?(r(`Added ${k.toUpperCase()} ${m} to your watchlist!`),l(""),n(""),s()):p(d.error||"Failed to add class")}catch{p("Failed to add class")}finally{j(!1)}},u=async a=>{try{(await fetch(`/api/subscriptions/${a}`,{method:"DELETE"})).ok&&f(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Failed to remove class:",a)}},v=async()=>{await fetch("/api/auth/logout",{method:"POST"}),a.push("/")};return g?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-[var(--foreground-muted)]",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"border-b border-[var(--border)] p-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ””"}),(0,b.jsx)("span",{className:"font-bold text-xl",children:"UH Class Alert"})]}),(0,b.jsx)("button",{onClick:v,className:"btn-secondary text-sm",children:"Logout"})]})}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto p-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Your Watchlist"}),(0,b.jsxs)("div",{className:"card mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add a Class"}),(0,b.jsxs)("form",{onSubmit:t,className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"Subject (e.g., COSC)",className:"input sm:w-32",maxLength:4,required:!0}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),placeholder:"Class # (e.g., 4337)",className:"input sm:w-40",maxLength:5,required:!0}),(0,b.jsx)("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Adding...":"Add Class"})]}),o&&(0,b.jsx)("p",{className:"mt-3 text-red-400 text-sm",children:o}),q&&(0,b.jsx)("p",{className:"mt-3 text-green-400 text-sm",children:q})]}),0===e.length?(0,b.jsxs)("div",{className:"card text-center py-12",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“š"}),(0,b.jsx)("p",{className:"text-[var(--foreground-muted)]",children:"No classes on your watchlist yet. Add one above!"})]}):(0,b.jsx)("div",{className:"space-y-4",children:e.map(a=>(0,b.jsxs)("div",{className:"card flex items-center justify-between animate-fade-in",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`text-2xl ${a.isOpen?"animate-pulse":""}`,children:a.isOpen?"ðŸŸ¢":"ðŸ”´"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg",children:[a.subject," ",a.catalogNbr]}),a.title&&(0,b.jsx)("p",{className:"text-[var(--foreground-muted)] text-sm",children:a.title})]})]}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-[var(--foreground-muted)]",children:[a.isOpen?(0,b.jsxs)("span",{className:"status-open font-medium",children:[a.seatsAvailable," seat",1!==a.seatsAvailable?"s":""," available!"]}):(0,b.jsx)("span",{children:"Currently closed"}),a.lastChecked&&(0,b.jsxs)("span",{className:"ml-3",children:["â€¢ Last checked: ",new Date(a.lastChecked).toLocaleString()]})]})]}),(0,b.jsx)("button",{onClick:()=>u(a.id),className:"text-[var(--foreground-muted)] hover:text-red-400 transition-colors p-2",title:"Remove from watchlist",children:"âœ•"})]},a.id))}),(0,b.jsx)("div",{className:"mt-8 p-4 rounded-lg bg-[var(--background-tertiary)] text-sm text-[var(--foreground-muted)]",children:(0,b.jsx)("p",{children:"ðŸ”” We check for class openings every 2 hours. When a seat opens up, you'll receive an email notification immediately."})})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2de8700c._.js.map